<!DOCTYPE html>
<head>
  <meta charset="utf-8">
  <style type="text/css">
  input {
    width:25px;
  }
  tr {
    text-align: center;
  }
  </style>
</head>
<body>
<div id="d">
<table id="table" align="center" border="1">
  <tbody id="tbody">
  <tr id="head_tr">
    <th rowspan="2">进程\资源情况</th>
    <th>Max</th>
    <th>Allocation</th>
    <th>Need</th>
    <th>Available</th>
  </tr>
  <tr id="resource_tr"></tr>
  <tr id="request_resource">
    <td>
      <select id="select">
      </select>
    </td>
    <td><button type="button" onclick="test()">提交</button></td>
  </tr>
  </tbody>
</table>
</div>
</body>
  <script type="text/javascript">
  var mrp = getxyz();//method_resource_process
  method = mrp[0];
  resource_number = mrp[1];
  process_number = mrp[2];
  drawtable(resource_number, process_number);

  var Max = new Array(process_number);
  var Allocation = new Array(process_number);
  var Need = new Array(process_number);
  var Available = new Array(resource_number);

  for(var i=0;i<process_number;i++){
    Max[i]=new Array(resource_number);
    Allocation[i]=new Array(resource_number);
    Need[i]=new Array(resource_number);
    Available[i]=new Array(resource_number);
  }

  //画表函数
  function drawtable(resource_number, process_number){
    var table = document.getElementById('tbody');

    var tag_head = document.getElementById('head_tr').cells;
    var tag_resource = document.getElementById('resource_tr');
    var request_resource = document.getElementById('request_resource');
    var select = document.getElementById('select');
    //设置表头
    // console.log('tag_head\'s length is '+tag_head.length);
    for(var i=1;i<5;i++){
      tag_head[i].colSpan=resource_number;//不是colspan而是colSpan
    }

    for(var i=0;i<4;i++){
      for(var j=0;j<resource_number;j++){
        var tag = document.createElement('td');
        tag.innerText=String.fromCharCode(65+j);
        tag_resource.appendChild(tag);
      }
    }

    for(var i=0;i<process_number;i++){//i代表行
      var tr=document.createElement('tr');//建立行
      table.insertBefore(tr,request_resource);//将行加入表中
      var p = document.createElement('td');
      p.innerText='P'+i;
      tr.appendChild(p);//将processname加入行头
      for(var j=0;j<4;j++){//j代表组
        if(!(i>0 && j==3)){
          for(var k=0;k<resource_number;k++){//k代表组里的列
              var td = document.createElement('td');
              tr.appendChild(td);
              var resource = document.createElement('input');
              resource.name = 'value';
              td.appendChild(resource);
          }
        }
      }
    }

    for(var i=0;i<process_number;i++){
      var option = document.createElement('option');
      option.value = i;
      option.innerText = 'P'+i;
      select.appendChild(option);
    }
  }

  //获取页面一提交的三个参数
  function getxyz(){
      var query = location.search.substring(1);
      console.log(query);
      var values= query.split("&");
      var value = new Array(values.length);
      for(var i=0;i<values.length;i++){
        var pos = values[i].indexOf('=');
        if (pos == -1) continue;
        value[i]=values[i].substring(pos+1);
      }
      return value;
  }

  function test(){
    //形成矩阵测试
    //0 1  2 3  4 5  6 7
    var test = document.getElementsByName('value');
    for(var i=0;i<process_number;i++){
      for(var j=0;j<resource_number;j++){
        Max[i][j]=test[4*i*resource_number+j];
        Allocation[i][j]=test[4*i*resource_number+resource_number+j];
        Need[i][j]=test[4*i*resource_number+resource_number*2+j];
        if(i==0){
          Available[j]=test[4*i*resource_number+resource_number*3+j];
        }
      }
    }
    //矩阵测试
    for(var i=0;i<Max.length;i++){
      for(var j=0;j<Max[0].length;j++){
        console.log(Max[i][j].value);
      }
    }
    for(var i=0;i<Available.length;i++){
      console.log(Available[i].value);
    }
  }

  function judge(Max, Allocation, Need, Available){
    for(var i=0;)
    for(var i=0;i<process_number;i++){
      for(var j=0;j<resource_number;j++){
        if(Available[j]>Need[i][j])
      }
    }
  }

  function judge_a_line(Need_a_line, Available){
  }
  </script>
</html>
